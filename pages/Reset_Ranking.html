<article>
	<div horizontal center-justified center layout fit id='spinner'>
		<paper-spinner active></paper-spinner>
	</div>
	<template is="auto-binding">
		<google-sheets key="18eSf_Z6ptdk3YOxTEdZhbweNdVvDdb952fR__w-ofIU" tabid="4" rows="{{rows}}" published></google-sheets>
		<div class='panel sub' horizontal center-justified layout style='display: none;' id='serverToggle'>
			<paper-radio-group selected="default">
				<paper-radio-button label="전체" class="reset-radio radio-black" on-core-change="{{changeReset}}" data-target="all-reset" data-default="all-reset"  name="default"></paper-radio-button>
				<paper-radio-button label="죽마" class="reset-radio reset-target radio-red" on-core-change="{{changeReset}}" data-target="{{'죽음 마법' | propertyTranslate}}" data-default="all-reset"></paper-radio-button>
				<paper-radio-button label="힐러" class="reset-radio reset-target radio-pink" on-core-change="{{changeReset}}" data-target="{{'사랑' | propertyTranslate}}" data-default="all-reset"></paper-radio-button>
				<paper-radio-button label="탱커" class="reset-radio reset-target radio-green" on-core-change="{{changeReset}}" data-target="{{'철벽 의지' | propertyTranslate}}" data-default="all-reset"></paper-radio-button>
				<paper-radio-button label="원딜" class="reset-radio reset-target radio-blue" on-core-change="{{changeReset}}" data-target="{{'야성' | propertyTranslate}}" data-default="all-reset"></paper-radio-button>
				<paper-radio-button label="근딜" class="reset-radio reset-target radio-blue" on-core-change="{{changeReset}}" data-target="{{'격투 사명' | propertyTranslate}}" data-default="all-reset"></paper-radio-button>
				<paper-radio-button label="나머지" class="reset-radio radio-blue" on-core-change="{{changeReset}}" data-target="" data-default="all-reset"></paper-radio-button>
			</paper-radio-group>
		</div>
		<div horizontal center-justified layout class='panel'>
			<paper-input-decorator label="Search" id="search-reset">
				<input is="core-input" on-change="{{searchReset}}" data-default="all-reset"></input>
			</paper-input-decorator>
		</div>
		<table class='table table-condensed table-hover' style='display: none;' id='datatable'>
			<thead>
				<tr>
					<th>상위 %</th>
					<th>이름<span class='small'> @원정대</span></th>
					<th class='sub'>
					<core-tooltip>
						직업<span class="small">(?)</span>
						<div tip>
							<span style='color: crimson'>죽마</span> = [죽음, 마법]<br><br>
							<span style='color: hotpink'>힐러</span> = [사랑]<br><br>
							<span style='color: yellowgreen'>탱커</span> = [철벽, 의지]<br><br>
							<span style='color: dodgerblue'>원딜</span> = [야성]<br><br>
							<span style='color: dodgerblue'>근딜</span> = [격투, 사명]
						</div>
					</core-tooltip>
					</th>
					<th>장비점수</th>
					<th class='sub'>
						<core-tooltip position='bottom' class='fancy' role='tooltip'>
							인증<span class="small">(?)</span>
							<div tip>
								캐릭터 6개를 모두 공개해야 <span style='color: green'>통과</span>입니다.<br><br>
								그렇지 않으면 <span style='color: goldenrod'>주의</span>이며, 적대 세력에<br><br>
								속해있는 캐릭터가 있는 경우 <span style='color: red'>경고</span>입니다.
							</div>
						</core-tooltip>				
					</th>			
					<th class='sub'>날짜</th>
				</tr>
			</thead>
			<tbody>
				<template repeat="{{row in rows}}">
					<template if="{{row.gsx$name.$t}}">
						<tr class='all-reset [[row.gsx$property.$t | propertyTranslate]] {{row.gsx$validity.$t | setContextualClasses}}' data-name="[[row.gsx$name.$t]]">
							<td>[[ {arr: rows, v: row.gsx$rank.$t} | getRank ]]</td>
							<td><a href='[[row.gsx$url.$t]]' target='_blank'>[[row.gsx$name.$t]]</a><span class='small'> @[[row.gsx$expedition.$t]]</span></td>
							<td class='sub cursor-help' title='[[row.gsx$property.$t]]'>[[row.gsx$class.$t]]</td>
							<td>[[row.gsx$score.$t | comma]]</td>
							<td class='sub' style='color: [[row.gsx$validity.$t | setColor]]'>[[row.gsx$validity.$t]]</td>
							<td class='sub'>[[row.gsx$timestamp.$t | parseDate]]</td>
						</tr>
					</template>
				</template>
			</tbody>
		</table>
		<script>
		  var sheet = document.querySelector('google-sheets');

		  sheet.addEventListener('google-sheet-data', function(e) {
		  	document.querySelector('#spinner').style.display = 'none';
		  	document.querySelector('#datatable').style.display = '';
		  	document.querySelector('#serverToggle').style.display = '';
		  });
		</script>
	</template>
</article>