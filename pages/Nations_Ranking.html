<article>
	<div horizontal center-justified center layout fit id='spinner'>
		<paper-spinner active></paper-spinner>
	</div>
	<div class='panel sub' horizontal center-justified layout style='display: none;' id='serverToggle'>
		<paper-radio-group selected="default">
			<paper-radio-button name="default" label="전체" on-core-change="{{changeServer2}}" data-target="all-nation-ranking" data-default="all-nation-ranking"></paper-radio-button>
			<template repeat="{{server in servers}}">
				<paper-radio-button label="{{server.name}}" class="target" on-core-change="{{changeServer2}}" data-target="{{server.value}}" data-default="all-nation-ranking"></paper-radio-button>
			</template>
		</paper-radio-group>
	</div>
	
	<template is="auto-binding">
		<google-sheets key="1agigo8tZhB7pMxYcpMvCurSi6I11io__5U1EtzMtfhE" gid="4" rows="{{rows}}" published></google-sheets>
		<table class='table table-condensed table-hover' style='display: none;' id='datatable'>
			<thead>
				<tr>
					<th class='sub'>서버</th>
					<th>국가</th>
					<th class='sub'>총원</th>
					<th class='sub'>장비점수 총합</th>
					<th>장비점수 평균</th>
					<th>
						<core-tooltip position='bottom' class='fancy' role='tooltip'>
							Top 100 평균<span class="small">(?)</span>
							<div tip>
								국가 내 장비점수<br><br>상위 100명에<br><br>대한 평균값이다.<br><br>
                <span style='color: red'>▲</span><span style='color: blue'>▼</span> 아이콘은<br><br>전일 대비 순위<br><br>등락을 나타낸다.
							</div>
						</core-tooltip>		
					</th>
					<th class='sub'>날짜</th>
				</tr>
			</thead>
			<tbody>
				<template repeat="{{row, i in rows}}">				
				<tr class="all-nation-ranking [[row.gsx$server.$t | serverTranslate]]">
					<td class='sub'>[[row.gsx$server.$t]]</td>
					<td>[[row.gsx$nation.$t]]</td>
					<td class='sub'>[[row.gsx$total.$t | comma]]명</td>
					<td class='sub'>[[row.gsx$scoresum.$t | comma]] <span class='small'>({{ {arr: rows, target: 'gsx$scoresum', value: row.gsx$scoresum.$t} | getRankIndex }}위)</span></td>
					<td>[[row.gsx$scoreavg.$t | parseInt | comma]] <span class='small'>({{ {arr: rows, target: 'gsx$scoreavg', value: row.gsx$scoreavg.$t} | getRankIndex }}위)</span></td>
					<td style='font-weight: bold'>[[row.gsx$scoreavgtop100.$t | parseInt | comma]] 
            <span class='small'>({{ {arr: rows, target: 'gsx$scoreavgtop100', value: row.gsx$scoreavgtop100.$t} | getRankIndex }}위)</span>
            <span class='small' style='color: [[ row.gsx$change.$t | getChangeColor ]]'>{{ row.gsx$change.$t | getChangeSimbol }}</span>
          </td>
					<td class='sub'>[[row.gsx$timestamp.$t | parseDate]]</td>
				</tr>
				</template>
			</tbody>
		</table>
		<script>
		  var sheet = document.querySelector('google-sheets');

		  sheet.addEventListener('google-sheet-data', function(e) {
		  	document.querySelector('#spinner').style.display = 'none';
		  	document.querySelector('#datatable').style.display = '';
		  	document.querySelector('#serverToggle').style.display = '';
		  });
		</script>
	</template>		
</article>